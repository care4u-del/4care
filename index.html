<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0" />
<title>ğŸ’– Daily Tracker ğŸ’–</title>
<link rel="icon" type="image/png" href="favicon.png" sizes="32x32">
<link rel="apple-touch-icon" href="favicon.png">
<meta name="theme-color" content="#ff9ecd" />
<style>
:root{
  --pink:#ff9ecd; --pink-deep:#ff72b1; --deep-pink:#f472b6; --purple:#c084fc;
  --light-pink:#ffd5ec; --bg:#fff0f6; --text:#4a154b;
  --radius:18px; --shadow:0 12px 28px rgba(255,150,200,.25);
  --card: #ffffff;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%;scroll-behavior:smooth}
body{
  font-family:'Poppins',system-ui,Segoe UI,Roboto,Arial;
  color:var(--text);
  background:
    radial-gradient(1200px 800px at -10% -10%, #ffe3f1 0%, transparent 55%),
    radial-gradient(900px 700px at 120% -10%, #efe4ff 0%, transparent 55%),
    radial-gradient(1200px 800px at 50% 120%, #ffd7eb 0%, var(--bg) 60%);
  min-height:100vh; display:flex; flex-direction:column; overflow-x:hidden;
}

/* Floating hearts (soft & professional) */
.hearts{position:fixed;inset:0;pointer-events:none;z-index:-1;overflow:hidden}
.heart{
  position:absolute;bottom:-10%;opacity:.35;color:var(--pink);
  font-size:1.3rem; animation:float 12s linear infinite;
}
@keyframes float{
  from{transform:translateY(0) rotate(0)}
  to{transform:translateY(-115vh) rotate(360deg)}
}

/* Header */
header{
  position:sticky; top:0; z-index:20;
  background:linear-gradient(90deg,var(--pink),var(--purple));
  color:#fff; text-align:center; padding:1rem; font-weight:800; letter-spacing:.2px;
  box-shadow:var(--shadow); font-size:1.25rem; border-bottom:1px solid rgba(255,255,255,.35);
}

/* Nav with sliding indicator */
nav{
  position:sticky; top:68px; z-index:19;
  background:rgba(255,255,255,.9); backdrop-filter:blur(8px);
  display:flex; gap:.5rem; padding:.4rem; margin:0 auto; width:100%; max-width:900px;
  border-radius:999px; box-shadow:0 6px 18px rgba(0,0,0,.08); border:1px solid #f5d6ea;
}
nav .wrap{position:relative; display:flex; width:100%; gap:.4rem}
nav button{
  flex:1; border:none; background:transparent; padding:.8rem .6rem; border-radius:999px; cursor:pointer;
  font-weight:700; color:#7a3a72; transition:color .2s, transform .18s;
}
nav button.active{color:#2d0f2a; transform:scale(1.02)}
nav .ink{
  position:absolute; top:3px; bottom:3px; left:3px; width:25%;
  background:linear-gradient(90deg,#ffd8ef,#ffb6dc);
  border-radius:999px; box-shadow:0 10px 20px rgba(255,150,200,.35);
  transition:transform .28s ease, width .28s ease;
}

/* Content */
main{
  flex:1; width:100%; max-width:900px; margin:12px auto 0; padding:1rem;
  display:flex; flex-direction:column; gap:1rem;
}
.card{
  background:var(--card);
  border:1px solid #f6d8ea;
  border-radius:var(--radius);
  padding:1.2rem; box-shadow:var(--shadow);
  animation:cardIn .35s ease both;
}
@keyframes cardIn{from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:translateY(0)}}

/* Inputs */
input,textarea,select,button{
  width:100%; padding:.9rem 1rem; border-radius:12px; border:1px solid #f6cfe4;
  font-family:inherit; font-size:1rem; outline:none; background:#fff;
  transition:border .18s, box-shadow .18s, transform .12s;
}
input:focus,textarea:focus,select:focus{
  border-color:#ffacd5; box-shadow:0 0 0 4px rgba(255,172,213,.18);
}
textarea{min-height:120px; resize:vertical}

button.save{
  background:linear-gradient(90deg,var(--pink),var(--deep-pink)); color:#fff; border:none; font-weight:800;
  box-shadow:0 10px 22px rgba(255,150,200,.35);
}
button.save:hover{transform:translateY(-1px)}
button.save:active{transform:translateY(0) scale(.98)}

/* Sections with slide/fade transitions */
section{
  display:none; flex-direction:column; gap:1rem; opacity:0; transform:translateX(16px);
  transition:opacity .28s ease, transform .28s ease;
}
section.active{display:flex; opacity:1; transform:translateX(0)}

/* Chips */
#symptomsBox{display:flex; flex-wrap:wrap; gap:.5rem}
#symptomsBox label{background:#ffe8f3; border:1px solid #f6cfe4; border-radius:999px; padding:.4rem .7rem}

/* Login (romantic, pro) */
#loginCard{
  max-width:440px; width:92%; margin:2.2rem auto 4.8rem; display:grid; gap:1rem;
  background:rgba(255,255,255,.96); border:1px solid #f6d8ea; border-radius:22px; box-shadow:var(--shadow);
  position:relative; overflow:hidden;
}
#loginCard::before{
  content:""; position:absolute; inset:-2px; background:
  radial-gradient(600px 200px at -10% 0%, rgba(255,172,213,.45), transparent 60%),
  radial-gradient(500px 180px at 120% 0%, rgba(192,132,252,.35), transparent 60%);
  pointer-events:none; z-index:0;
}
.login-inner{position:relative; z-index:1}
.pw{position:relative}
.pw .toggle{
  position:absolute; right:10px; top:50%; transform:translateY(-50%);
  background:transparent; border:none; color:#a05b94; cursor:pointer; font-weight:700;
}

/* Footer fixed */
.footer{
  position:fixed; bottom:0; left:0; width:100%;
  background:linear-gradient(90deg,var(--pink),var(--purple)); color:#fff; text-align:center;
  padding:.9rem .5rem; font-size:1rem; box-shadow:0 -2px 8px rgba(255,150,200,.3); z-index:30;
}
.footer span{display:block; font-size:.85rem; opacity:.9; margin-top:4px}
main,#loginCard{padding-bottom:84px}

/* Toast (premium) */
.toast{
  position:fixed; bottom:96px; left:50%; transform:translateX(-50%) translateY(24px);
  background:linear-gradient(95deg,#ffd6ee,#ffb6de); color:#2d0f2a; font-weight:800;
  padding:.9rem 1.4rem; border-radius:14px; box-shadow:0 14px 30px rgba(255,150,200,.45);
  opacity:0; pointer-events:none; transition:all .35s ease; z-index:1000;
}
.toast.show{opacity:1; transform:translateX(-50%) translateY(0)}

/* Animations */
@keyframes fadeIn{from{opacity:0; transform:translateY(10px)} to{opacity:1; transform:translateY(0)}}
@keyframes slideIn{from{opacity:0; transform:translateY(-20px)} to{opacity:1; transform:translateY(0)}}

/* Responsive tweaks */
@media (max-width:768px){
  header{font-size:1.1rem}
  nav{top:62px}
  textarea{min-height:110px}
}
@media (max-width:480px){
  nav{border-radius:16px}
  nav .ink{top:2px; bottom:2px; left:2px}
  #loginCard{margin-top:1.4rem}
}
</style>
</head>
<body>

<!-- Floating hearts -->
<div class="hearts" id="hearts"></div>

<header>ğŸ’ Daily Tracker4u ğŸ’</header>

<!-- LOGIN -->
<div id="loginCard" class="card">
  <div class="login-inner">
    <h2 style="text-align:center; margin-bottom:.4rem;">Login</h2>
    <div style="display:grid; gap:.75rem">
      <div>
        <input id="username" placeholder="Username" />
      </div>
      <div class="pw">
        <input id="password" type="password" placeholder="Password" />
        <button class="toggle" type="button" onclick="togglePw()">ğŸ‘ï¸</button>
      </div>
      <button onclick="login()" class="save">Login</button>
      <p id="loginMsg" style="color:var(--deep-pink);text-align:center;"></p>
    </div>
  </div>
</div>

<!-- NAV -->
<nav id="tabs" style="display:none;">
  <div class="wrap">
    <div class="ink" id="ink"></div>
    <button data-tab="home" class="active">ğŸŒ… Home</button>
    <button data-tab="daily">ğŸ’Œ Daily</button>
    <button data-tab="health">ğŸ©º Health</button>
    <button data-tab="water">ğŸ’§ Water</button>
  </div>
</nav>

<!-- MAIN -->
<main id="app" style="display:none;">
  <!-- HOME -->
  <section id="home" class="active">
    <div class="card">
      <h2 id="greetText">ğŸŒ¸ Good Day!</h2>
      <p>Welcome backğŸ’–</p>
    </div>
    <div class="card">
      <h3>Todayâ€™s Summary ğŸŒˆ</h3>
      <p id="sumText">Loading...</p>
    </div>
  </section>

  <!-- DAILY -->
  <section id="daily">
    <div class="card">
      <h2>ğŸ’Œ Daily Note</h2>
      <input type="date" id="dailyDate"/>
      <textarea id="dailyText" placeholder="Ivala emaindho ikkada rasko....."></textarea>
      <select id="dailyMood">
        <option value="">Mood</option>
        <option>ğŸ¥° Happy</option>
        <option>ğŸ˜´ Sleepy</option>
        <option>ğŸ˜‡ Peaceful</option>
        <option>ğŸ¤’ Not well</option>
        <option>ğŸ¤© Excited</option>
      </select>
      <button class="save" onclick="saveDaily()">Save ğŸ’–</button>
    </div>
  </section>

  <!-- HEALTH -->
  <section id="health">
    <div class="card">
      <h2>ğŸ©º Health Tracker</h2>
      <label>ğŸ˜Š Feeling</label>
      <select id="feeling">
        <option value="">Select</option>
        <option>Fine</option>
        <option>Tired</option>
        <option>Sick</option>
        <option>Cramps</option>
        <option>Headache</option>
      </select>
      <label>ğŸ˜´ Sleep (hours)</label>
      <input type="number" id="sleep" min="0" max="24" placeholder="e.g. 7"/>
      <label>ğŸ½ï¸ Tinnava</label>
      <select id="appetite">
        <option value="">Select</option>
        <option>Yes</option>
        <option>No</option>
        <option>Tinta</option>
      </select>
      <label>ğŸ’­ Symptoms</label>
      <div id="symptomsBox">
        <label><input type="checkbox" value="Cramps">Cramps</label>
        <label><input type="checkbox" value="Headache">Headache</label>
        <label><input type="checkbox" value="Cold">Cold</label>
        <label><input type="checkbox" value="Stress">Stress</label>
        <label><input type="checkbox" value="Back pain">Any Pain</label>
      </div>
      <button class="save" onclick="saveHealth()">Save ğŸ©·</button>
      <div id="healthTip" class="tip"></div>
    </div>
  </section>

  <!-- WATER -->
  <section id="water">
    <div class="card">
      <h2>ğŸ’§ Water Tracker</h2>
      <input type="number" id="waterCups" min="0" max="20" placeholder="e.g. 8"/>
      <button class="save" onclick="saveWater()">Save ğŸ’§</button>
      <div id="waterTip" class="tip"></div>
    </div>
  </section>
</main>

<footer class="footer">
  ğŸ’—Made with Love n CareğŸ’—
  <span>-Nannaa</span>
</footer>

<div id="toast" class="toast"></div>

<script>
/* ====== CONFIG ====== */
const API="https://fourcare.onrender.com/memories";
const allowedUsers={"8367226377":"Chinnuu19","admin":"adm"};
let loggedIn=false, currentUser=null;

/* ====== HEARTS ====== */
const hearts=document.getElementById("hearts");
for(let i=0;i<18;i++){
  const h=document.createElement("div");
  h.className="heart"; h.textContent="ğŸ’–";
  h.style.left=Math.random()*100+"%";
  h.style.animationDuration=10+Math.random()*10+"s";
  h.style.fontSize=(1+Math.random()*1.4)+"rem";
  hearts.appendChild(h);
}

/* ====== TOAST ====== */
function showToast(msg, icon="ğŸ’–"){
  const t=document.getElementById("toast");
  t.textContent=`${icon} ${msg}`; t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"),2300);
}

/* ====== LOGIN ====== */
function togglePw(){
  const el=document.getElementById("password");
  el.type = el.type==="password" ? "text" : "password";
}
function login(){
  const u=document.getElementById("username").value.trim();
  const p=document.getElementById("password").value.trim();
  if(allowedUsers[u]===p){
    loggedIn=true; currentUser=u;
    document.getElementById("loginCard").style.display="none";
    document.getElementById("tabs").style.display="block";
    document.getElementById("app").style.display="block";
    setGreeting(); loadSummary(); moveInk(0);
    showToast("Welcome back! ğŸ’•","âœ¨");
  }else{
    document.getElementById("loginMsg").textContent="Invalid login ğŸ’”";
  }
}

/* ====== NAV / TABS ====== */
const ink=document.getElementById("ink");
const tabButtons=[...document.querySelectorAll('nav button')];
tabButtons.forEach((btn,idx)=>{
  btn.addEventListener('click',()=>{
    tabButtons.forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('main section').forEach(s=>s.classList.remove('active'));
    document.getElementById(btn.dataset.tab).classList.add('active');
    moveInk(idx);
  });
});
function moveInk(index){
  const wrap=document.querySelector('nav .wrap');
  const btn=tabButtons[index];
  const b=btn.getBoundingClientRect(), w=wrap.getBoundingClientRect();
  ink.style.width=b.width+'px'; ink.style.transform=`translateX(${b.left - w.left}px)`;
}

/* ====== GREETING ====== */
function setGreeting(){
  const h=new Date().getHours();
  let text="Hello,ğŸ’•";
  if(h<12) text="â˜€ï¸ Good Morning Chinnuu!";
  else if(h<18) text="ğŸŒ¸ Good Afternoon Chinnuu!";
  else text="ğŸŒ™ Good Evening Chinnuu!";
  document.getElementById("greetText").textContent=text;
}

/* ====== API HELPERS ====== */
async function postMemory(payload){
  try{
    const res=await fetch(API,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(payload)});
    if(!res.ok) throw new Error("Bad response");
  }catch(e){ console.error(e); showToast("Save failed","âš ï¸"); }
}

/* ====== SAVE: DAILY ====== */
async function saveDaily(){
  const date=document.getElementById("dailyDate").value || new Date().toISOString().slice(0,10);
  const text=document.getElementById("dailyText").value.trim();
  const mood=document.getElementById("dailyMood").value;
  if(!text){ showToast("Write something ğŸ’Œ","âš ï¸"); return; }

  // Keep backend compatibility (text) + add detail fields
  const payload={ section:"daily", date, text, mood, user: currentUser, createdAt:new Date().toISOString(),
                  summaryText:`Note (${mood||"â€”"}): ${text.slice(0,80)}${text.length>80?"â€¦":""}`,
                  details:{mood,text} };
  await postMemory(payload);
  showToast("Daily note saved!","ğŸ’Œ");
  document.getElementById("dailyText").value="";
  document.getElementById("dailyMood").value="";
  loadSummary();
}

/* ====== SAVE: HEALTH ====== */
async function saveHealth(){
  const date=new Date().toISOString().slice(0,10);
  const feeling=document.getElementById("feeling").value;
  const sleep=parseFloat(document.getElementById("sleep").value||0);
  const appetite=document.getElementById("appetite").value;
  const symptoms=[...document.querySelectorAll("#symptomsBox input:checked")].map(cb=>cb.value);

  const tips=[];
  if(sleep && sleep<6) tips.push("Try to rest a bit more tonight ğŸ˜´");
  else if(sleep>9) tips.push("Plenty of sleep! Keep your rhythm ğŸŒ¸");
  if(feeling==="Tired"||feeling==="Cramps") tips.push("Warm tea & rest ğŸ’•");
  if(appetite==="Low") tips.push("Eat small healthy meals today ğŸ");
  if(symptoms.includes("Stress")) tips.push("Deep breaths ğŸŒ¼");
  document.getElementById("healthTip").textContent=tips.join(" ");

  const text=`Feeling:${feeling||"â€”"}, Sleep:${sleep||0}h, Appetite:${appetite||"â€”"}, Symptoms:${symptoms.join(", ")||"â€”"}`;

  const payload={ section:"health", date, text, user: currentUser, createdAt:new Date().toISOString(),
                  summaryText:`Health â€¢ ${text}`, details:{feeling,sleep,appetite,symptoms,suggestions:tips} };
  await postMemory(payload);
  showToast("Health updated!","ğŸ©·");

  // clear
  document.getElementById("feeling").value="";
  document.getElementById("sleep").value="";
  document.getElementById("appetite").value="";
  document.querySelectorAll("#symptomsBox input:checked").forEach(cb=>cb.checked=false);

  loadSummary();
}

/* ====== SAVE: WATER ====== */
async function saveWater(){
  const date=new Date().toISOString().slice(0,10);
  const water=parseFloat(document.getElementById("waterCups").value||0);
  if(!water){ showToast("Enter water intake ğŸ’§","âš ï¸"); return; }

  const tip=document.getElementById("waterTip");
  if(water<6) tip.textContent="Drink a bit more water to stay hydrated ğŸ’§";
  else if(water>=8) tip.textContent="Perfect hydration! ğŸ¥°";
  else tip.textContent="Good job! Keep sipping through the day ğŸ’§";

  const text=`Drank ${water} cups of water`;
  const payload={ section:"water", date, text, water, user: currentUser, createdAt:new Date().toISOString(),
                  summaryText:`Water â€¢ ${water} cups`, details:{water} };
  await postMemory(payload);
  showToast("Water saved!","ğŸ’§");

  document.getElementById("waterCups").value="";
  loadSummary();
}

/* ====== SUMMARY ====== */
async function loadSummary(){
  try{
    const res=await fetch(API);
    const data=await res.json();
    const today=new Date().toISOString().slice(0,10);
    const todayData=data.filter(d=>d.date===today && (!currentUser || d.user===currentUser));
    let text="No data yet ğŸ’•";
    if(todayData.length){
      const w=todayData.find(d=>d.section==="water");
      const h=todayData.find(d=>d.section==="health");
      const d=todayData.find(d=>d.section==="daily");
      text="";
      if(d) text+=`Mood: ${d.mood ?? d.details?.mood ?? "â€”"} | `;
      if(h){
        const hs = h.sleep ?? h.details?.sleep ?? null;
        text+=`Sleep: ${hs ?? "â€”"} hrs | `;
      }
      if(w){
        const ww = w.water ?? w.details?.water ?? null;
        text+=`Water: ${ww ?? "â€”"} cups`;
      }
      text = text.replace(/\s+\|\s*$/,''); // trim trailing pipe
    }
    document.getElementById("sumText").textContent=text;
  }catch(e){
    document.getElementById("sumText").textContent="Can't load summary ğŸ˜¢";
  }
}
</script>
</body>
</html>
